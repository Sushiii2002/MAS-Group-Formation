{% extends "base.html" %}

{% block title %}Home - MAS Group Formation{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1>Welcome to the Multi-Agent Group Formation System</h1>
        <p class="hero-subtitle">
            Intelligent automated group formation for Computer Science capstone projects
        </p>
        <div class="hero-buttons">
            <a href="/register" class="btn btn-primary">Register as Student</a>
            <a href="/faculty" class="btn btn-secondary">Faculty Dashboard</a>
        </div>
    </div>
</div>

<div class="container">
    <div class="features-section">
        <h2>System Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ðŸ‘¥</div>
                <h3>Smart Group Formation</h3>
                <p>Uses genetic algorithms to create balanced groups based on skills, GWA, and personality traits.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ðŸ“Š</div>
                <h3>Task Allocation</h3>
                <p>Automatically assigns tasks based on member strengths and ensures fair workload distribution.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ðŸ“ˆ</div>
                <h3>Progress Monitoring</h3>
                <p>Real-time tracking of group progress with early warning system for at-risk groups.</p>
            </div>
        </div>
    </div>

    <div class="stats-section">
        <h2>System Statistics</h2>
        <div class="stats-grid" id="stats-container">
            <div class="stat-card">
                <div class="stat-number" id="total-students">--</div>
                <div class="stat-label">Total Students</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-groups">--</div>
                <div class="stat-label">Active Groups</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-compatibility">--</div>
                <div class="stat-label">Avg Compatibility</div>
            </div>
        </div>
    </div>
</div>

<script>
    // Load statistics on page load
    window.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await fetch('http://localhost:5000/api/dashboard/faculty');
            const data = await response.json();
            
            if (data.success) {
                document.getElementById('total-students').textContent = 
                    data.data.summary.total_students;
                document.getElementById('total-groups').textContent = 
                    data.data.summary.total_groups;
                document.getElementById('avg-compatibility').textContent = 
                    data.data.compatibility.avg_score ? 
                    data.data.compatibility.avg_score.toFixed(3) : 'N/A';
            }
        } catch (error) {
            console.error('Error loading stats:', error);
        }
    });
</script>
{% endblock %}